(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"45be":function(e,t,n){"use strict";n("c9d7")},c9d7:function(e,t,n){},f820:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home",staticStyle:{"text-align":"center"}},[n("button",{on:{click:function(t){return e.Start()}}},[e._v("Start")]),n("div",{staticClass:"mic-name"}),e._m(0),e._m(1)])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b",[e._v("Microphone Vol:")]),e._v(" "),n("span",{staticClass:"volLevel"}),e._v("; "),n("b",[e._v("Max Vol:")]),e._v(" "),n("span",{staticClass:"maxLevel"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pids-wrapper"},[n("div",{staticClass:"pid"}),n("div",{staticClass:"pid"}),n("div",{staticClass:"pid"}),n("div",{staticClass:"pid"}),n("div",{staticClass:"pid"}),n("div",{staticClass:"pid"}),n("div",{staticClass:"pid"}),n("div",{staticClass:"pid"}),n("div",{staticClass:"pid"}),n("div",{staticClass:"pid"})])}],o=n("9ab4"),i=n("1b40"),s=n("af24"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o["b"])(t,e),t.prototype.created=function(){this.timeInterval=1e3,this.maxVolPerTime=0,this.ConnectToServer()},t.prototype.OutputPlayerAudio=function(e){var t=new Blob([e],{type:"audio/webm;codecs=opus"}),n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){var e=n.result,t=new Audio(e);t.play()}},t.prototype.AnalyticVoice=function(e){var t=this,n=new(window.AudioContext||window.webkitAudioContext),r=n.createAnalyser(),a=n.createMediaStreamSource(e),o=n.createScriptProcessor(2048,1,1),i=document.querySelector(".volLevel"),s=document.querySelector(".maxLevel"),c=[],l=document.querySelectorAll(".pid");l.forEach((function(e){c.push(e)}));var d=function(e){for(var t=Math.round(e/5),n=c.slice(0,t),r=0;r<c.length;r++)c[r].style.backgroundColor="#e6e7e8";for(r=0;r<n.length;r++)n[r].style.backgroundColor="#69ce2b"};r.smoothingTimeConstant=.8,r.fftSize=1024,a.connect(r),r.connect(o),o.connect(n.destination),o.addEventListener("audioprocess",(function(){var e=new Uint8Array(r.frequencyBinCount);r.getByteFrequencyData(e);for(var n=0,a=e.length,o=0;o<a;o++)n+=e[o];var c=n/a;c>10&&c>t.maxVolPerTime&&(t.maxVolPerTime=c),s.innerHTML=String(Math.round(t.maxVolPerTime)),i.innerHTML=String(Math.round(c)),d(c)}))},t.prototype.Start=function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.AnalyticVoice(t);var n=new window.MediaRecorder(t),r=[];e.maxVolPerTime=0,n.start(),n.addEventListener("dataavailable",(function(e){r.push(e.data)})),n.addEventListener("stop",(function(){if(r.length>0&&e.maxVolPerTime>0){var t=r[0].type,a=new Blob(r,{type:t});a.arrayBuffer().then((function(e){var t=new Uint8Array(e);window.SendPlayerTick(t)}))}r=[],e.maxVolPerTime=0,n.start(),setTimeout((function(){n.stop()}),e.timeInterval)})),setTimeout((function(){n.stop()}),e.timeInterval)}))},t.prototype.ConnectToServer=function(){var e=this,t=0,n=9991,r=9992,a=9993,o=9994,i=9996,c=function(e,t,n){void 0===n&&(n=!1);var r=1==n?0:36,a="";0==n&&(e.offset=t,a=e.readUtf8String(r)),e.offset=t+r+0;var o=e.readUInt32LE(),i={x:0,y:0,z:0};e.offset=t+r+4+0,i.x=e.readFloatLE(),e.offset=t+r+4+4,i.y=e.readFloatLE(),e.offset=t+r+4+8,i.z=e.readFloatLE(),e.offset=t+r+4+12;var s=e.readUInt8();return{uuid:a,id:o,position:i,state:s}},l=function(e,t,r){var a=new Uint8Array(17+r.byteLength),o=new Uint8Array(new Uint32Array([n]).buffer);a.set(o,0),a.set(new Uint8Array(new Float32Array([e.x]).buffer),4),a.set(new Uint8Array(new Float32Array([e.y]).buffer),8),a.set(new Uint8Array(new Float32Array([e.z]).buffer),12),a.set(new Uint8Array([t]),16),a.set(r,17),d.send(a)};window.SendPlayerTick=function(e){return l({x:0,y:0,z:0},0,e)};var d=new WebSocket("wss://getway.dev.viexpo.ru:10010");d.binaryType="arraybuffer",d.onmessage=function(t){var n=new s["BufferStream"](t.data);n.offset=0;var l=n.readInt32LE();switch(l){case o:n.offset=4;for(var d=n.readUInt32LE(),u=[],f=0;f<d;f++){var v=c(n,8+53*f);u.push(v)}console.log("Method: FromMovement_FromPlayerScene_PlayerList, count: "+d,u);break;case r:var y=c(n,4);console.log("User Join: "+y.uuid);break;case a:n.offset=4;var p=n.readUtf8String(36);console.log("User Leave: "+p);break;case i:var w=c(n,4,!0),m=new Uint8Array(n.buffer.buffer,21);e.OutputPlayerAudio(m),console.log("FromSound_FromPlayerScene_PlayerVoice => ",w);break;default:console.log("Method: Unknown");break}},d.onopen=function(){var e=new Uint8Array(40),n=new Uint8Array(new Uint32Array([t]).buffer),r=(new TextEncoder).encode("0e1e703b-059b-4d3d-b275-3fc36ea4e8c4");e.set(n,0),e.set(r,4),d.send(e)}},t=Object(o["a"])([Object(i["a"])({components:{}})],t),t}(i["b"]),l=c,d=l,u=(n("45be"),n("2877")),f=Object(u["a"])(d,r,a,!1,null,"2332195a",null);t["default"]=f.exports}}]);
//# sourceMappingURL=about.719ea67b.js.map